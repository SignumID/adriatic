(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{1638:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Superhero=void 0;var n=v(i(0)),a=v(i(2)),o=v(i(6)),r=v(i(694)),s=i(28),d=i(812),u=i(690),l=i(33),c=i(46),h=i(153),f=v(i(561)),p=i(154);function v(e){return e&&e.__esModule?e:{default:e}}var g=i(907);t.Superhero=function(){function e(t){var i=this;if((0,n.default)(this,e),this.content="[data-hero-content]",this.isIE11AndInCarousel=navigator.appVersion.indexOf("Trident/")>-1&&!!t.closest(".carousel"),this.isIE11AndInCarousel){var a=t.querySelector("style");a&&a.parentNode.removeChild(a)}this.initDom(t),this.bindEvents(),this.calculateHeight(),this.$localVideoPlayer.length&&!s.isMobileWidth&&this.$localVideoPlayer.each(function(e,t){i.fitVideo(t)}),this.registerJsInterface(t)}return(0,a.default)(e,[{key:"initDom",value:function(e){this.$superhero=(0,o.default)(e),this.$section=(0,o.default)("[data-superhero]",e),this.$sectionMobile=(0,o.default)("[data-superhero-mobile]",e),this.$content=(0,o.default)(this.content,e),this.$localVideo=(0,o.default)("[data-video-src]",e),this.$localVideoPlayer=(0,o.default)("[data-local-video]",e),this.$videoWrapper=(0,o.default)(".superhero__video--local",e),this.$videoControl=(0,o.default)(".superhero__video-controls",e),this.windowHeight=window.innerHeight||(0,o.default)(window).height(),(0,u.initDynamicLinks)(e),(0,l.getGemSettings)().wcmMode!==l.WcmMode.EDIT&&(this.updateHeadline("headline",".js-superhero-headline",{}),this.updateHeadline("subheadline",".js-superhero-subheadline",{}))}},{key:"registerJsInterface",value:function(e){c.ComponentHandler.addComponent("superhero-"+(0,p.getUniqueNumber)(),{useDynamicData:e.hasAttribute("data-use-dynamic-data"),componentElement:this.$superhero,updateHeadline:this.updateHeadline.bind(this,"headline",".js-superhero-headline"),updateSubheadline:this.updateHeadline.bind(this,"subheadline",".js-superhero-subheadline"),updateLinks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.initDynamicLinks)(e,t)},updateImages:this.updateImages.bind(this)},c.ComponentTypes.Superhero,(0,h.getSectionIdForFormComponent)(this.$superhero))}},{key:"updateImages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=".{{ className }} { background-image: url('{{{ imageUrl }}}'); {{#height}} height: {{ height }}px; {{/height}} }",i="",n="",a=(0,f.default)(this.$superhero.data("dynamic-desktop-image")||"",e),r=(0,f.default)(this.$superhero.data("dynamic-mobile-image")||"",e),s=this.$superhero.attr("data-superhero-class");a&&(i="@media screen and (min-width: 768px){ "+(0,f.default)(t,{className:s,imageUrl:a,height:this.$superhero.attr("data-desktop-height")})+" }"),r&&(n="@media screen and (max-width: 768px){ "+(0,f.default)(t,{className:s,imageUrl:r,height:this.$superhero.attr("data-mobile-height")})+" }"),(a||r)&&((0,o.default)("head").append('<style type="text/css"> '+n+" "+i+" </style>"),this.update())}},{key:"updateHeadline",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.$superhero.find(t).first();n.length&&(n.data(e)||n.data(e,n.html()),n.html((0,f.default)(n.data(e),i)))}},{key:"getFactor",value:function(e){var t=parseFloat(e.data("superhero-factor")||.8);return t<=1&&t>0?t:1}},{key:"calculateHeight",value:function(){var e=0,t=(0,o.default)("#content");t.length&&(e=t.offset().top);var i=this.$section.parents(".superhero__item"),n=i.find(".superhero__content").outerHeight();if(!i.hasClass("js-superhero-video")&&i.hasClass("superhero--middle")&&(i.hasClass("superhero--contentCrop")||i.hasClass("superhero--noCrop"))&&(n+=100,this.$section.height(n)),(i.hasClass("superhero--contentCrop")||i.hasClass("superhero--noCrop"))&&i.height(n),this.isIE11AndInCarousel&&!s.isMobileWidth&&i.data("desktop-height")&&i.css("min-height",i.data("desktop-height")),this.$sectionMobile.length?this.$sectionMobile.hasClass("superhero--middle")&&this.$sectionMobile.height(this.$sectionMobile.height()):this.$section.hasClass("superhero--middle")&&this.$section.height(this.$section.height()),s.isMobileWidth)this.$section.removeClass("superhero--"+this.$section.data("superhero-type")),this.$section.attr("data-superhero-type","mobile");else{var a=i.data("background-src"),r=i.hasClass("superhero--content-presentation-transition"),d=i.data("loading-image"),u="";d&&r?u=d:a&&(u=a),u?(this.isIE11AndInCarousel&&i.css({"background-image":"url("+u+")"}),g(i.get(0),{background:!0}).on("done",function(){return i.addClass("is-image-loaded")})):i.addClass("is-image-loaded"),this.$localVideo.each(function(e,t){var n=(0,o.default)(t).parent();i.hasClass("superhero--content-presentation-transition")&&(n[0].onloadeddata=function(){setTimeout(function(){n.addClass("is-video-loaded")},500)},n[0].onplaying=function(){setTimeout(function(){i.css({"background-image":"url("+a+")"})},500)}),(0,o.default)(t).attr("src",(0,o.default)(t).data("src")),n.load()});var l=this.$section.find(this.content),c=l.data("hero-content"),h=l.outerHeight(!0),f=this.$section.outerHeight(!0),p=this.$section.parent().outerHeight(!0),v=this.$section.offset().top,m=e===v?this.windowHeight-v:this.windowHeight,y=f<m?m*this.getFactor(this.$section):f,k=f<m?m:f;k=k>p?p:k,this.$section.find(".video-player").length&&this.$section.css("height",k),y>h&&(this.$section.parent().hasClass("superhero__item--bottom")&&this.$section.find(".superhero__inner").css("position","absolute"),"bottom"===c?l.css("top",y-h):c||l.css("top",(y-h)/2))}(0,o.default)(window).trigger("resize.navSection")}},{key:"resetHeight",value:function(){this.$section.css("height",""),this.$content.css("top","")}},{key:"update",value:function(){this.windowHeight=window.innerHeight||(0,o.default)(window).height(),this.resetHeight(),this.calculateHeight()}},{key:"bindEvents",value:function(){var e=this;0!==this.$videoWrapper.length&&((0,o.default)(window).on("resize",(0,r.default)(function(){e.$localVideoPlayer.each(function(t,i){e.fitVideo(i)})},250)),(0,d.appendWebtrekkMedia)().then(function(){return(0,d.setVideo4WebtrekkMedia)(e.$localVideoPlayer.get(0))}).catch(console.warn)),(0,s.checkMobileDevice)()&&(0,o.default)(window).one("resize.hero",(0,r.default)(this.update,500).bind(this)),this.$superhero.each(function(t,i){if((0,o.default)(i).hasClass("superhero--effect-parallaxcontentshift")){var n=i.querySelector(".superhero__inner"),a=i.querySelector(".superhero__content");n&&a&&((0,o.default)(window).on("scroll",function(){e.updateContentPosition(n,a)}),e.updateContentPosition(n,a,!0))}var r=i.querySelector("video");if(r){var d=(0,o.default)(i).hasClass("superhero--content-presentation-transition"),u=(0,o.default)(i).find(".superhero__inner");d&&(s.isMobileWidth||u.css("opacity",0),u.removeClass("hide")),r.onended=function(t){d&&((0,o.default)(r).css("opacity",0),setTimeout(function(){u.css("opacity",1),e.fitVideo(r)},500))}}}),this.$videoControl.on("click",function(t){e.handleVideoControl(t.target)})}},{key:"fitVideo",value:function(e){var t=(0,o.default)(e).closest(".superhero"),i=t.find(".superhero__caption").first(),n=t.find(".superhero__content").first().height()+72,a=(0,o.default)(e).data("min-height"),r=n>a?n:a;i.outerHeight(r)}},{key:"handleVideoControl",value:function(e){var t=(0,o.default)(e).parents(".superhero__video-controls")[0],i=!0,n=this.$superhero.find(".superhero__content"),a="transitioncontent"===this.$section.data("superhero-content-presentation"),r=(0,o.default)(t).parents(".superhero__caption").find("video")[0];r.paused?((0,o.default)(t).hide(),(0,o.default)(t).css("opacity","0"),r.muted=!1,r.volume=.3,i&&a&&(n.css("opacity",0).removeClass("hide"),(0,o.default)(r).css("opacity",1),i=!1),(0,o.default)(t).find("span:first-child").removeClass("is-paused").addClass("is-playing"),r.play()):((0,o.default)(t).show(),(0,o.default)(t).css("opacity","1"),(0,o.default)(t).find("span:first-child").removeClass("is-playing").addClass("is-paused"),r.pause())}},{key:"updateContentPosition",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,o.default)(e).hasClass("is-in-viewport-center")||i){var n=e.getBoundingClientRect().top+e.ownerDocument.defaultView.pageYOffset,a=-.05*(window.pageYOffset-n);(0,o.default)(t).css({transform:"translateY("+a+"px)"})}}}]),e}()},486:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Superhero=void 0;var n=i(1638);t.Superhero=n.Superhero},561:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(8)),a=r(i(149));t.default=function(e,t){return o.renderHtml(e,(0,n.default)({},t,l))};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(650));function r(e){return e&&e.__esModule?e:{default:e}}var s=i(651),d=["h1","h2"].concat((0,a.default)(s.defaults.allowedTags)),u=new o.Writer;u.unescapedValue=function(e,t){var i=o.Writer.prototype.unescapedValue(e,t);return i?s(i,{allowedTags:d}):i},o.renderHtml=u.render.bind(u);var l={spaceAfterComma:function(){return function(e,t){return t(e).replace(/,/g,", ")}}}},583:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(i(59)),a=l(i(8));t.replacePlaceholders=c,t.replacePlaceholdersInHeaders=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=new Headers;return h(i,e),h(i,t),i};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(i(93)),r=i(33),s=l(i(561)),d=l(i(600)),u=i(159);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,a.default)({},function(){return{cookies:o.getJSON(),qs_params:function(){var e=window.sessionStorage.getItem("qs_params");try{return JSON.parse(e)}catch(e){console.error(e)}return null}(),gemSettings:(0,r.getGemSettings)(),storage:function(){return(0,u.getDataFromSessionStorage)()}()}}(),t);return(0,s.default)(e,i)}function h(e,t){t&&t.forEach(function(t){var i=(0,n.default)((0,d.default)(t)[0],2),a=i[0],o=c(i[1]),r=c(a);e.set(r,o)})}},652:function(e,t){},659:function(e,t){},660:function(e,t){},661:function(e,t){},690:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initDynamicLinks=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[].slice.call(e.querySelectorAll("a[data-dynamic-parameters]")).forEach(function(i){i.hasAttribute("data-original-href")||i.setAttribute("data-original-href",i.href);var a=i.getAttribute("data-dynamic-parameters");if(a){var o=e;o.data||(o.data={dynamicParameters:a}),i.href=""+i.getAttribute("data-original-href")+(0,n.replacePlaceholders)(o.data.dynamicParameters,t)}})};var n=i(583)},812:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(13));t.appendWebtrekkMedia=function(){return new n.default(function(e,t){if(r()){var i="webtrekk_mediaTracking";if(document.getElementById(i))e();else{var n=document.createElement("script");n.id=i,n.src="/etc/designs/gem/common/webtrekk/webtrekk_mediaTracking.min.js",n.onload=function(){return e()},document.body.appendChild(n)}}else t("No webtrekk included!")})},t.setVideo4WebtrekkMedia=function(e){if(!r()||void 0===d())return;var t=s(e);e.addEventListener("play",function(){return t.play()},!0),e.addEventListener("pause",function(){return t.pause()},!0),e.addEventListener("ended",function(){return t.ended()},!0),e.addEventListener("seeked",function(){return t.seeked()},!0)},t.sendTracking=s;var a=i(862);var o=3e4;function r(){return void 0!==window.wt}function s(e){var t=null,i=function(e){return function(t){var i=e[t];switch(t){case a.VideoProps.VOLUME:i=Math.ceil(100*i).toString();break;case a.VideoProps.MUTED:i=i?"1":"0";break;case a.VideoProps.DURATION:i=i||"0";break;case a.VideoProps.SRC:i=i||e.currentSrc}return i.toString()}}(e);return{play:function(){var e=this;this.send(a.WebtrekkMediaPlayerAction.PLAY),t=window.setInterval(function(){return e.send(a.WebtrekkMediaPlayerAction.POS)},o)},pause:function(){t&&clearInterval(t),this.send(a.WebtrekkMediaPlayerAction.PAUSE)},ended:function(){t&&clearInterval(t),this.send(a.WebtrekkMediaPlayerAction.EOF)},seeked:function(){this.send(a.WebtrekkMediaPlayerAction.SEEK),e.paused?this.send(a.WebtrekkMediaPlayerAction.PAUSE):this.send(a.WebtrekkMediaPlayerAction.PLAY)},send:function(e){if(d()){var t=i(a.VideoProps.CURRENT_TIME),n=i(a.VideoProps.DURATION);t===n&&e===a.WebtrekkMediaPlayerAction.PAUSE||d()(i(a.VideoProps.SRC),e,t,n,"","",i(a.VideoProps.VOLUME),i(a.VideoProps.MUTED))}}}}function d(){return window.wt_sendinfo_media}},862:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.WebtrekkMediaPlayerAction=void 0;!function(e){e.INIT="init",e.PLAY="play",e.POS="pos",e.PAUSE="pause",e.STOP="stop",e.EOF="eof",e.SEEK="seek"}(n||(t.WebtrekkMediaPlayerAction=n={}));var a=t.VideoProps=void 0;!function(e){e.SRC="src",e.DURATION="duration",e.CURRENT_TIME="currentTime",e.VOLUME="volume",e.MUTED="muted"}(a||(t.VideoProps=a={}))}}]);
//# sourceMappingURL=105.f246dd24b43dc3795405.min.js.map