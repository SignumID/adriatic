(function(){var g,h,e,k,l,m={},b=Liferay.Analytics.integration("LiferayAnalyticsProcessor").readyOnInitialize();b.prototype._ready=!0;b.prototype.flush=function(a){var d=this.getPendingEvents();d.length&&g&&(g(l,{data:{context:JSON.stringify(m),events:JSON.stringify(d)},method:"POST",on:{failure:function(c){console.error(c.type)},success:function(){h(a)&&a()}}}),this.store([]),e=clearInterval(e))};b.prototype.getPendingEvents=function(){var a=localStorage.getItem("liferay-analytics-events")||"[]";
return JSON.parse(a)};b.prototype.initialize=function(){k=this.options.interval;l=this.options.uri;AUI().use("aui-io-request",function(a){a.Object.each(themeDisplay,function(d,c){if(a.Lang.isFunction(d)){var f=/^(get|is)(.*)$/.exec(c)[2],f=f[0].toLowerCase()+f.slice(1);m[f]=themeDisplay[c]()}});h=a.Lang.isFunction;g=a.io.request})};b.prototype.store=function(a){a=a||[];localStorage.setItem("liferay-analytics-events",JSON.stringify(a))};b.prototype.track=function(a,d){var c=this.getPendingEvents();
c.push(a.obj);this.store(c);e||(e=setTimeout(this.flush.bind(this),k))};Liferay.Analytics.addIntegration(b)})();