(function(d){var c=function(a,b){this.$menu=this.activeRow=this.mouseLocs=this.lastDelayLoc=this.timeoutId=this.options=null;this.init(a,b)};c.DEFAULTS={rowSelector:"\x3e li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:d.noop,exit:d.noop,activate:d.noop,deactivate:d.noop,exitMenu:d.noop};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.mousemoveDocument=function(a){this.mouseLocs.push({x:a.pageX,y:a.pageY});this.mouseLocs.length>this.MOUSE_LOCS_TRACKED&&this.mouseLocs.shift()};
c.prototype.mouseleaveMenu=function(){this.timeoutId&&clearTimeout(this.timeoutId);this.options.exitMenu(this)&&(this.activeRow&&this.options.deactivate(this.activeRow),this.activeRow=null)};c.prototype.mouseenterRow=function(a){this.timeoutId&&clearTimeout(this.timeoutId);this.options.enter(a.currentTarget);this.possiblyActivate(a.currentTarget)};c.prototype.mouseleaveRow=function(a){this.options.exit(a.currentTarget)};c.prototype.clickRow=function(a){this.activate(a.currentTarget)};c.prototype.activate=
function(a){a!=this.activeRow&&(this.activeRow&&this.options.deactivate(this.activeRow),this.options.activate(a),this.activeRow=a)};c.prototype.possiblyActivate=function(a){var b=this.activationDelay(),d=this;b?this.timeoutId=setTimeout(function(){d.possiblyActivate(a)},b):this.activate(a)};c.prototype.activationDelay=function(){function a(a,b){return(b.y-a.y)/(b.x-a.x)}if(!this.activeRow||!d(this.activeRow).is(this.options.submenuSelector))return 0;var b=this.$menu.offset(),c={x:b.left,y:b.top-this.options.tolerance},
h={x:b.left+this.$menu.outerWidth(),y:c.y},m={x:b.left,y:b.top+this.$menu.outerHeight()+this.options.tolerance},k={x:b.left+this.$menu.outerWidth(),y:m.y},f=this.mouseLocs[this.mouseLocs.length-1],e=this.mouseLocs[0];if(!f)return 0;e||(e=f);if(e.x<b.left||e.x>k.x||e.y<b.top||e.y>k.y||this.lastDelayLoc&&f.x==this.lastDelayLoc.x&&f.y==this.lastDelayLoc.y)return 0;var g=h,b=k;"left"==this.options.submenuDirection?(g=m,b=c):"below"==this.options.submenuDirection?(g=k,b=m):"above"==this.options.submenuDirection&&
(g=c,b=h);c=a(f,g);h=a(f,b);g=a(e,g);e=a(e,b);if(c<g&&h>e)return this.lastDelayLoc=f,this.DELAY;this.lastDelayLoc=null;return 0};c.prototype.destroy=function(){this.$menu.removeData("jquery.menu-aim");this.$menu.off(".menu-aim").find(this.options.rowSelector).off(".menu-aim");d(document).off(".menu-aim")};c.prototype.init=function(a,b){this.$menu=d(a);this.activeRow=null;this.mouseLocs=[];this.timeoutId=this.lastDelayLoc=null;this.options=d.extend({},this.getDefaults(),b);this.MOUSE_LOCS_TRACKED=
3;this.DELAY=300;this.$menu.on("mouseleave.menu-aim",d.proxy(this.mouseleaveMenu,this)).find(this.options.rowSelector).on("mouseenter.menu-aim",d.proxy(this.mouseenterRow,this)).on("mouseleave.menu-aim",d.proxy(this.mouseleaveRow,this)).on("click.menu-aim",d.proxy(this.clickRow,this));d(document).on("mousemove.menu-aim",d.proxy(this.mousemoveDocument,this))};d.fn.menuAim=function(a){return this.each(function(){var b=d(this),l=b.data("jquery.menu-aim"),h="object"==typeof a&&a;l||b.data("jquery.menu-aim",
l=new c(this,h));if("string"==typeof a)l[a]()})}})(jQuery);