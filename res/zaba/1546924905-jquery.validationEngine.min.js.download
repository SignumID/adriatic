(function(h){var e={init:function(a){this.data("jqv")&&null!=this.data("jqv")||(a=e._saveOptions(this,a),h(document).on("click",".formError",function(){h(this).fadeOut(150,function(){h(this).closest(".formError").remove()})}));return this},attach:function(a){a=a?e._saveOptions(this,a):this.data("jqv");a.validateAttribute=this.find("[data-validation-engine*\x3dvalidate]").length?"data-validation-engine":"class";a.binded&&(this.on(a.validationEventTrigger,"["+a.validateAttribute+"*\x3dvalidate]:not([type\x3dcheckbox]):not([type\x3dradio]):not(.datepicker)",
e._onFieldEvent),this.on("click","["+a.validateAttribute+"*\x3dvalidate][type\x3dcheckbox],["+a.validateAttribute+"*\x3dvalidate][type\x3dradio]",e._onFieldEvent),this.on(a.validationEventTrigger,"["+a.validateAttribute+"*\x3dvalidate][class*\x3ddatepicker]",{delay:300},e._onFieldEvent));a.autoPositionUpdate&&h(window).bind("resize",{noAnimation:!0,formElem:this},e.updatePromptsPosition);this.on("click","a[data-validation-engine-skip], a[class*\x3d'validate-skip'], button[data-validation-engine-skip], button[class*\x3d'validate-skip'], input[data-validation-engine-skip], input[class*\x3d'validate-skip']",
e._submitButtonClick);this.removeData("jqv_submitButton");this.on("submit",e._onSubmitEvent);return this},detach:function(){var a=this.data("jqv");this.off(a.validationEventTrigger,"["+a.validateAttribute+"*\x3dvalidate]:not([type\x3dcheckbox]):not([type\x3dradio]):not(.datepicker)",e._onFieldEvent);this.off("click","["+a.validateAttribute+"*\x3dvalidate][type\x3dcheckbox],["+a.validateAttribute+"*\x3dvalidate][type\x3dradio]",e._onFieldEvent);this.off(a.validationEventTrigger,"["+a.validateAttribute+
"*\x3dvalidate][class*\x3ddatepicker]",e._onFieldEvent);this.off("submit",e._onSubmitEvent);this.removeData("jqv");this.off("click","a[data-validation-engine-skip], a[class*\x3d'validate-skip'], button[data-validation-engine-skip], button[class*\x3d'validate-skip'], input[data-validation-engine-skip], input[class*\x3d'validate-skip']",e._submitButtonClick);this.removeData("jqv_submitButton");a.autoPositionUpdate&&h(window).off("resize",e.updatePromptsPosition);return this},validate:function(a){var b=
h(this),d=null,c;if(b.is("form")||b.hasClass("validationEngineContainer")){if(b.hasClass("validating"))return!1;b.addClass("validating");c=a?e._saveOptions(b,a):b.data("jqv");d=e._validateFields(this);setTimeout(function(){b.removeClass("validating")},100);if(d&&c.onSuccess)c.onSuccess();else if(!d&&c.onFailure)c.onFailure()}else if(b.is("form")||b.hasClass("validationEngineContainer"))b.removeClass("validating");else{var g=b.closest("form, .validationEngineContainer");c=g.data("jqv")?g.data("jqv"):
h.validationEngine.defaults;if((d=e._validateField(b,c))&&c.onFieldSuccess)c.onFieldSuccess();else if(c.onFieldFailure&&0<c.InvalidFields.length)c.onFieldFailure();return!d}return c.onValidationComplete?!!c.onValidationComplete(g,d):d},updatePromptsPosition:function(a){if(a&&this==window)var b=a.data.formElem,d=a.data.noAnimation;else b=h(this.closest("form, .validationEngineContainer"));var c=b.data("jqv");c||(c=e._saveOptions(b,c));b.find("["+c.validateAttribute+"*\x3dvalidate]").not(":disabled").each(function(){var a=
h(this);c.prettySelect&&a.is(":hidden")&&(a=b.find("#"+c.usePrefix+a.attr("id")+c.useSuffix));var f=e._getPrompt(a),l=h(f).find(".formErrorContent").html();f&&e._updatePrompt(a,h(f),l,void 0,!1,c,d)});return this},showPrompt:function(a,b,d,c){var g=this.closest("form, .validationEngineContainer").data("jqv");g||(g=e._saveOptions(this,g));d&&(g.promptPosition=d);g.showArrow=1==c;e._showPrompt(this,a,b,!1,g);return this},hide:function(){var a=h(this).closest("form, .validationEngineContainer"),b=a.data("jqv");
b||(b=e._saveOptions(a,b));b=b&&b.fadeDuration?b.fadeDuration:.3;a=a.is("form")||a.hasClass("validationEngineContainer")?"parentForm"+e._getClassName(h(a).attr("id")):e._getClassName(h(a).attr("id"))+"formError";h("."+a).fadeTo(b,0,function(){h(this).closest(".formError").remove()});return this},hideAll:function(){var a=this.data("jqv"),a=a?a.fadeDuration:300;h(".formError").fadeTo(a,0,function(){h(this).closest(".formError").remove()});return this},_onFieldEvent:function(a){var b=h(this),d=b.closest("form, .validationEngineContainer"),
c=d.data("jqv");c||(c=e._saveOptions(d,c));c.eventTrigger="field";1==c.notEmpty?0<b.val().length&&window.setTimeout(function(){e._validateField(b,c)},a.data?a.data.delay:0):window.setTimeout(function(){e._validateField(b,c)},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=h(this),b=a.data("jqv");if(a.data("jqv_submitButton")){var d=h("#"+a.data("jqv_submitButton"));if(d&&0<d.length&&(d.hasClass("validate-skip")||"true"==d.attr("data-validation-engine-skip")))return!0}b.eventTrigger="submit";
return(d=e._validateFields(a))&&b.ajaxFormValidation?(e._validateFormWithAjax(a,b),!1):b.onValidationComplete?!!b.onValidationComplete(a,d):d},_checkAjaxStatus:function(a){var b=!0;h.each(a.ajaxValidCache,function(a,c){if(!c)return b=!1});return b},_checkAjaxFieldStatus:function(a,b){return 1==b.ajaxValidCache[a]},_validateFields:function(a){var b=a.data("jqv"),d=!1;a.trigger("jqv.form.validating");var c=null;a.find("["+b.validateAttribute+"*\x3dvalidate]").not(":disabled").each(function(){var g=
h(this),f=[];if(0>h.inArray(g.attr("name"),f)){(d|=e._validateField(g,b))&&null==c&&(g.is(":hidden")&&b.prettySelect?c=g=a.find("#"+b.usePrefix+e._jqSelector(g.attr("id"))+b.useSuffix):(g.data("jqv-prompt-at")instanceof jQuery?g=g.data("jqv-prompt-at"):g.data("jqv-prompt-at")&&(g=h(g.data("jqv-prompt-at"))),c=g));if(b.doNotShowAllErrosOnSubmit)return!1;f.push(g.attr("name"));if(1==b.showOneMessage&&d)return!1}});a.trigger("jqv.form.result",[d]);if(d){if(b.scroll){var g=c.offset().top,f=c.offset().left,
l=b.promptPosition;"string"==typeof l&&-1!=l.indexOf(":")&&(l=l.substring(0,l.indexOf(":")));"bottomRight"!=l&&"bottomLeft"!=l&&(l=e._getPrompt(c))&&(g=l.offset().top);b.scrollOffset&&(g-=b.scrollOffset);if(b.isOverflown){l=h(b.overflownDIV);if(!l.length)return!1;f=l.scrollTop();l=-parseInt(l.offset().top);g+=f+l-5;h(b.overflownDIV).filter(":not(:animated)").animate({scrollTop:g},1100,function(){b.focusFirstField&&c.focus()})}else h("html, body").animate({scrollTop:g},1100,function(){b.focusFirstField&&
c.focus()}),h("html, body").animate({scrollLeft:f},1100)}else b.focusFirstField&&c.focus();return!1}return!0},_validateFormWithAjax:function(a,b){var d=a.serialize(),c=b.ajaxFormValidationMethod?b.ajaxFormValidationMethod:"GET",g=b.ajaxFormValidationURL?b.ajaxFormValidationURL:a.attr("action"),f=b.dataType?b.dataType:"json";h.ajax({type:c,url:g,cache:!1,dataType:f,data:d,form:a,methods:e,options:b,beforeSend:function(){return b.onBeforeAjaxFormValidation(a,b)},error:function(a,c){if(b.onFailure)b.onFailure(a,
c);else e._ajaxError(a,c)},success:function(c){if("json"==f&&!0!==c){for(var d=!1,g=0;g<c.length;g++){var l=c[g],m=h(h("#"+l[0])[0]);if(1==m.length){var k=l[2];1==l[1]?""!=k&&k?(b.allrules[k]&&(l=b.allrules[k].alertTextOk)&&(k=l),b.showPrompts&&e._showPrompt(m,k,"pass",!1,b,!0)):e._closePrompt(m):(d|=1,b.allrules[k]&&(l=b.allrules[k].alertText)&&(k=l),b.showPrompts&&e._showPrompt(m,k,"",!1,b,!0))}}b.onAjaxFormComplete(!d,a,c,b)}else b.onAjaxFormComplete(!0,a,c,b)}})},_validateField:function(a,b,d){a.attr("id")||
(a.attr("id","form-validation-field-"+h.validationEngine.fieldIdCounter),++h.validationEngine.fieldIdCounter);if(a.hasClass(b.ignoreFieldsWithClass)||!b.validateNonVisibleFields&&(a.is(":hidden")&&!b.prettySelect||a.parent().is(":hidden")))return!1;var c=a.attr(b.validateAttribute),c=/validate\[(.*)\]/.exec(c);if(!c)return!1;var g=c[1],f=g.split(/\[|,|\]/),c=a.attr("name"),l="",p="",q=!1,r=!1;b.isError=!1;b.showArrow=!0;0<b.maxErrorsPerField&&(r=!0);for(var m=h(a.closest("form, .validationEngineContainer")),
k=0;k<f.length;k++)f[k]=f[k].replace(" ",""),""===f[k]&&delete f[k];for(var u=k=0;k<f.length;k++){if(r&&u>=b.maxErrorsPerField){q||(d=h.inArray("required",f),q=-1!=d&&d>=k);break}var n=void 0;switch(f[k]){case "required":q=!0;n=e._getErrorMessage(m,a,f[k],f,k,b,e._required);break;case "custom":n=e._getErrorMessage(m,a,f[k],f,k,b,e._custom);break;case "groupRequired":var t="["+b.validateAttribute+"*\x3d"+f[k+1]+"]",n=m.find(t).eq(0);n[0]!=a[0]&&(e._validateField(n,b,d),b.showArrow=!0);(n=e._getErrorMessage(m,
a,f[k],f,k,b,e._groupRequired))&&(q=!0);b.showArrow=!1;break;case "ajax":(n=e._ajax(a,f,k,b))&&(p="load");break;case "minSize":n=e._getErrorMessage(m,a,f[k],f,k,b,e._minSize);break;case "maxSize":n=e._getErrorMessage(m,a,f[k],f,k,b,e._maxSize);break;case "min":n=e._getErrorMessage(m,a,f[k],f,k,b,e._min);break;case "max":n=e._getErrorMessage(m,a,f[k],f,k,b,e._max);break;case "past":n=e._getErrorMessage(m,a,f[k],f,k,b,e._past);break;case "future":n=e._getErrorMessage(m,a,f[k],f,k,b,e._future);break;
case "dateRange":t="["+b.validateAttribute+"*\x3d"+f[k+1]+"]";b.firstOfGroup=m.find(t).eq(0);b.secondOfGroup=m.find(t).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)n=e._getErrorMessage(m,a,f[k],f,k,b,e._dateRange);n&&(q=!0);b.showArrow=!1;break;case "dateTimeRange":t="["+b.validateAttribute+"*\x3d"+f[k+1]+"]";b.firstOfGroup=m.find(t).eq(0);b.secondOfGroup=m.find(t).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)n=e._getErrorMessage(m,a,f[k],f,k,b,e._dateTimeRange);n&&(q=
!0);b.showArrow=!1;break;case "maxCheckbox":a=h(m.find("input[name\x3d'"+c+"']"));n=e._getErrorMessage(m,a,f[k],f,k,b,e._maxCheckbox);break;case "minCheckbox":a=h(m.find("input[name\x3d'"+c+"']"));n=e._getErrorMessage(m,a,f[k],f,k,b,e._minCheckbox);break;case "equals":n=e._getErrorMessage(m,a,f[k],f,k,b,e._equals);break;case "funcCall":n=e._getErrorMessage(m,a,f[k],f,k,b,e._funcCall);break;case "creditCard":n=e._getErrorMessage(m,a,f[k],f,k,b,e._creditCard);break;case "condRequired":n=e._getErrorMessage(m,
a,f[k],f,k,b,e._condRequired);void 0!==n&&(q=!0);break;case "funcCallRequired":n=e._getErrorMessage(m,a,f[k],f,k,b,e._funcCallRequired),void 0!==n&&(q=!0)}t=!1;if("object"==typeof n)switch(n.status){case "_break":t=!0;break;case "_error":n=n.message;break;case "_error_no_prompt":return!0}0==k&&0==g.indexOf("funcCallRequired")&&void 0!==n&&(l+=n+"\x3cbr/\x3e",b.isError=!0,u++,t=!0);if(t)break;"string"==typeof n&&(l+=n+"\x3cbr/\x3e",b.isError=!0,u++)}!q&&!a.val()&&1>a.val().length&&0>h.inArray("equals",
f)&&(b.isError=!1);d=a.prop("type");f=a.data("promptPosition")||b.promptPosition;("radio"==d||"checkbox"==d)&&1<m.find("input[name\x3d'"+c+"']").size()&&(a="inline"===f?h(m.find("input[name\x3d'"+c+"'][type!\x3dhidden]:last")):h(m.find("input[name\x3d'"+c+"'][type!\x3dhidden]:first")),b.showArrow=b.showArrowOnRadioAndCheckbox);a.is(":hidden")&&b.prettySelect&&(a=m.find("#"+b.usePrefix+e._jqSelector(a.attr("id"))+b.useSuffix));b.isError&&b.showPrompts?e._showPrompt(a,l,p,!1,b):e._closePrompt(a);a.trigger("jqv.field.result",
[a,b.isError,l]);c=h.inArray(a[0],b.InvalidFields);-1==c?b.isError&&b.InvalidFields.push(a[0]):b.isError||b.InvalidFields.splice(c,1);e._handleStatusCssClasses(a,b);if(b.isError&&b.onFieldFailure)b.onFieldFailure(a);if(!b.isError&&b.onFieldSuccess)b.onFieldSuccess(a);return b.isError},_handleStatusCssClasses:function(a,b){b.addSuccessCssClassToField&&a.removeClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&a.removeClass(b.addFailureCssClassToField);b.addSuccessCssClassToField&&!b.isError&&
a.addClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&b.isError&&a.addClass(b.addFailureCssClassToField)},_getErrorMessage:function(a,b,d,c,g,f,l){var p=jQuery.inArray(d,c);if("custom"===d||"funcCall"===d||"funcCallRequired"===d)d=d+"["+c[p+1]+"]",delete c[p];var p=d,q=(b.attr("data-validation-engine")?b.attr("data-validation-engine"):b.attr("class")).split(" ");a="future"==d||"past"==d||"maxCheckbox"==d||"minCheckbox"==d?l(a,b,c,g,f):l(b,c,g,f);void 0!=a&&(b=e._getCustomErrorMessage(h(b),
q,p,f))&&(a=b);return a},_getCustomErrorMessage:function(a,b,d,c){var g;g=/^custom\[.*\]$/.test(d)?e._validityProp.custom:e._validityProp[d];if(void 0!=g&&(g=a.attr("data-errormessage-"+g),void 0!=g))return g;g=a.attr("data-errormessage");if(void 0!=g)return g;a="#"+a.attr("id");if("undefined"!=typeof c.custom_error_messages[a]&&"undefined"!=typeof c.custom_error_messages[a][d])g=c.custom_error_messages[a][d].message;else if(0<b.length)for(a=0;a<b.length&&0<b.length;a++){var f="."+b[a];if("undefined"!=
typeof c.custom_error_messages[f]&&"undefined"!=typeof c.custom_error_messages[f][d]){g=c.custom_error_messages[f][d].message;break}}g||"undefined"==typeof c.custom_error_messages[d]||"undefined"==typeof c.custom_error_messages[d].message||(g=c.custom_error_messages[d].message);return g},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",
future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",funcCallRequired:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(a,b,d,c,g){switch(a.prop("type")){case "radio":case "checkbox":if(g){if(!a.prop("checked"))return c.allrules[b[d]].alertTextCheckboxMultiple;break}g=a.closest("form, .validationEngineContainer");a=a.attr("name");
if(0==g.find("input[name\x3d'"+a+"']:checked").size())return 1==g.find("input[name\x3d'"+a+"']:visible").size()?c.allrules[b[d]].alertTextCheckboxe:c.allrules[b[d]].alertTextCheckboxMultiple;break;default:g=h.trim(a.val());var e=h.trim(a.attr("data-validation-placeholder"));a=h.trim(a.attr("placeholder"));if(!g||e&&g==e||a&&g==a)return c.allrules[b[d]].alertText}},_groupRequired:function(a,b,d,c){var g="["+c.validateAttribute+"*\x3d"+b[d+1]+"]",f=!1;a.closest("form, .validationEngineContainer").find(g).each(function(){if(!e._required(h(this),
b,d,c))return f=!0,!1});if(!f)return c.allrules[b[d]].alertText},_custom:function(a,b,d,c){var g=b[d+1],e=c.allrules[g];if(e)if(e.regex)if(b=e.regex,!b)alert("jqv:custom regex not found - "+g);else{if(!(new RegExp(b)).test(a.val()))return c.allrules[g].alertText}else if(e.func)if(e=e.func,"function"!==typeof e)alert("jqv:custom parameter 'function' is no function - "+g);else{if(!e(a,b,d,c))return c.allrules[g].alertText}else alert("jqv:custom type not allowed "+g);else alert("jqv:custom rule not found - "+
g)},_funcCall:function(a,b,d,c){var e=b[d+1];if(-1<e.indexOf(".")){for(var e=e.split("."),f=window;e.length;)f=f[e.shift()];e=f}else e=window[e]||c.customFunctions[e];if("function"==typeof e)return e(a,b,d,c)},_funcCallRequired:function(a,b,d,c){return e._funcCall(a,b,d,c)},_equals:function(a,b,d,c){b=b[d+1];if(a.val()!=h("#"+b).val())return c.allrules.equals.alertText},_maxSize:function(a,b,d,c){b=b[d+1];if(a.val().length>b)return a=c.allrules.maxSize,a.alertText+b+a.alertText2},_minSize:function(a,
b,d,c){b=b[d+1];if(a.val().length<b)return a=c.allrules.minSize,a.alertText+b+a.alertText2},_min:function(a,b,d,c){b=parseFloat(b[d+1]);if(parseFloat(a.val())<b)return a=c.allrules.min,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_max:function(a,b,d,c){b=parseFloat(b[d+1]);if(parseFloat(a.val())>b)return a=c.allrules.max,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_past:function(a,b,d,c,g){d=d[c+1];a=h(a.find("*[name\x3d'"+d.replace(/^#+/,"")+"']"));if("now"==d.toLowerCase())a=
new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=e._parseDate(a.val())}else a=e._parseDate(d);if(e._parseDate(b.val())>a)return b=g.allrules.past,b.alertText2?b.alertText+e._dateToString(a)+b.alertText2:b.alertText+e._dateToString(a)},_future:function(a,b,d,c,g){d=d[c+1];a=h(a.find("*[name\x3d'"+d.replace(/^#+/,"")+"']"));if("now"==d.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=e._parseDate(a.val())}else a=e._parseDate(d);if(e._parseDate(b.val())<
a)return b=g.allrules.future,b.alertText2?b.alertText+e._dateToString(a)+b.alertText2:b.alertText+e._dateToString(a)},_isDate:function(a){return(new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/)).test(a)},
_isDateTime:function(a){return(new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/)).test(a)},_dateCompare:function(a,
b){return new Date(a.toString())<new Date(b.toString())},_dateRange:function(a,b,d,c){if(!c.firstOfGroup[0].value&&c.secondOfGroup[0].value||c.firstOfGroup[0].value&&!c.secondOfGroup[0].value||!e._isDate(c.firstOfGroup[0].value)||!e._isDate(c.secondOfGroup[0].value)||!e._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value))return c.allrules[b[d]].alertText+c.allrules[b[d]].alertText2},_dateTimeRange:function(a,b,d,c){if(!c.firstOfGroup[0].value&&c.secondOfGroup[0].value||c.firstOfGroup[0].value&&
!c.secondOfGroup[0].value||!e._isDateTime(c.firstOfGroup[0].value)||!e._isDateTime(c.secondOfGroup[0].value)||!e._dateCompare(c.firstOfGroup[0].value,c.secondOfGroup[0].value))return c.allrules[b[d]].alertText+c.allrules[b[d]].alertText2},_maxCheckbox:function(a,b,d,c,e){d=d[c+1];b=b.attr("name");if(a.find("input[name\x3d'"+b+"']:checked").size()>d)return e.showArrow=!1,e.allrules.maxCheckbox.alertText2?e.allrules.maxCheckbox.alertText+" "+d+" "+e.allrules.maxCheckbox.alertText2:e.allrules.maxCheckbox.alertText},
_minCheckbox:function(a,b,d,c,e){d=d[c+1];b=b.attr("name");if(a.find("input[name\x3d'"+b+"']:checked").size()<d)return e.showArrow=!1,e.allrules.minCheckbox.alertText+" "+d+" "+e.allrules.minCheckbox.alertText2},_creditCard:function(a,b,d,c){d=!1;a=a.val().replace(/ +/g,"").replace(/-+/g,"");var e=a.length;if(14<=e&&16>=e&&0<parseInt(a)){b=0;d=e-1;var e=1,f,h=new String;do f=parseInt(a.charAt(d)),h+=0==e++%2?2*f:f;while(0<=--d);for(d=0;d<h.length;d++)b+=parseInt(h.charAt(d));d=0==b%10}if(!d)return c.allrules.creditCard.alertText},
_ajax:function(a,b,d,c){var g=c.allrules[b[d+1]];d=g.extraData;var f=g.extraDataDynamic;b={fieldId:a.attr("id"),fieldValue:a.val()};if("object"===typeof d)h.extend(b,d);else if("string"===typeof d){var l=d.split("\x26");for(d=0;d<l.length;d++){var p=l[d].split("\x3d");p[0]&&p[0]&&(b[p[0]]=p[1])}}if(f)for(f=String(f).split(","),d=0;d<f.length;d++)l=f[d],h(l).length&&(p=a.closest("form, .validationEngineContainer").find(l).val(),l.replace("#",""),escape(p),b[l.replace("#","")]=p);"field"==c.eventTrigger&&
delete c.ajaxValidCache[a.attr("id")];if(!c.isError&&!e._checkAjaxFieldStatus(a.attr("id"),c))return h.ajax({type:c.ajaxFormValidationMethod,url:g.url,cache:!1,dataType:"json",data:b,field:a,rule:g,methods:e,options:c,beforeSend:function(){},error:function(a,b){if(c.onFailure)c.onFailure(a,b);else e._ajaxError(a,b)},success:function(b){var d=b[0],f=h("#"+d).eq(0);if(1==f.length){var k=b[2];b[1]?(c.ajaxValidCache[d]=!0,k?c.allrules[k]&&(b=c.allrules[k].alertTextOk)&&(k=b):k=g.alertTextOk,c.showPrompts&&
(k?e._showPrompt(f,k,"pass",!0,c):e._closePrompt(f)),"submit"==c.eventTrigger&&a.closest("form").submit()):(c.ajaxValidCache[d]=!1,c.isError=!0,k?c.allrules[k]&&(b=c.allrules[k].alertText)&&(k=b):k=g.alertText,c.showPrompts&&e._showPrompt(f,k,"",!0,c))}f.trigger("jqv.field.result",[f,c.isError,k])}}),g.alertTextLoad},_ajaxError:function(a,b){0==a.status&&null==b?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+a.status+" "+b)},
_dateToString:function(a){return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()},_parseDate:function(a){var b=a.split("-");b==a&&(b=a.split("/"));return b==a?(b=a.split("."),new Date(b[2],b[1]-1,b[0])):new Date(b[0],b[1]-1,b[2])},_showPrompt:function(a,b,d,c,g,f){a.data("jqv-prompt-at")instanceof jQuery?a=a.data("jqv-prompt-at"):a.data("jqv-prompt-at")&&(a=h(a.data("jqv-prompt-at")));var l=e._getPrompt(a);f&&(l=!1);h.trim(b)&&(l?e._updatePrompt(a,l,b,d,c,g):e._buildPrompt(a,b,d,c,g))},_buildPrompt:function(a,
b,d,c,g){d=h("\x3cdiv\x3e");d.addClass(e._getClassName(a.attr("id"))+"formError");d.addClass("parentForm"+e._getClassName(a.closest("form, .validationEngineContainer").attr("id")));d.addClass("formError");a.parent().addClass("has-error");c&&d.addClass("ajaxed");d.addClass("error-label").html(b);a.after(d);return d.animate({opacity:.87})},_updatePrompt:function(a,b,d,c,e,f,h){b&&(e?b.addClass("ajaxed"):b.removeClass("ajaxed"),b.find(".formErrorContent").html(d))},_closePrompt:function(a){var b=e._getPrompt(a);
a.parent().removeClass("has-error");b&&b.fadeTo("fast",0,function(){b.closest(".formError").remove()})},closePrompt:function(a){return e._closePrompt(a)},_getPrompt:function(a){var b=h(a).closest("form, .validationEngineContainer").attr("id");a=e._getClassName(a.attr("id"))+"formError";if(b=h("."+e._escapeExpression(a)+".parentForm"+e._getClassName(b))[0])return h(b)},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(a){var b=h(document),
d=h("body");return!!(a&&a.hasClass("rtl")||a&&"rtl"===(a.attr("dir")||"").toLowerCase()||b.hasClass("rtl")||"rtl"===(b.attr("dir")||"").toLowerCase()||d.hasClass("rtl")||"rtl"===(d.attr("dir")||"").toLowerCase())},_calculatePosition:function(a,b,d){var c,e,f,h=a.width(),p=a.position().left,q=a.position().top;a.height();f=b.height();c=e=0;f=-f;d=a.data("promptPosition")||d.promptPosition;var r,m,k=m=0;"string"==typeof d&&-1!=d.indexOf(":")&&(r=d.substring(d.indexOf(":")+1),d=d.substring(0,d.indexOf(":")),
-1!=r.indexOf(",")&&(m=r.substring(r.indexOf(",")+1),r=r.substring(0,r.indexOf(",")),k=parseInt(m),isNaN(k)&&(k=0)),m=parseInt(r),isNaN(r));switch(d){default:case "topRight":e+=p+h-27;c+=q;break;case "topLeft":c+=q;e+=p;break;case "centerRight":c=q+4;f=0;e=p+a.outerWidth(!0)+5;break;case "centerLeft":e=p-(b.width()+2);c=q+4;f=0;break;case "bottomLeft":c=q+a.height()+5;f=0;e=p;break;case "bottomRight":e=p+h-27;c=q+a.height()+5;f=0;break;case "inline":f=c=e=0}return{callerTopPosition:c+k+"px",callerleftPosition:e+
m+"px",marginTopSize:f+"px"}},_saveOptions:function(a,b){if(h.validationEngineLanguage)var d=h.validationEngineLanguage.allRules;else h.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");h.validationEngine.defaults.allrules=d;d=h.extend(!0,{},h.validationEngine.defaults,b);a.data("jqv",d);return d},_getClassName:function(a){if(a)return a.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(a){return a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,
"\\$1")},_condRequired:function(a,b,d,c){var g;for(d+=1;d<b.length;d++)if(g=jQuery("#"+b[d]).first(),g.length&&void 0==e._required(g,["required"],0,c,!0))return e._required(a,["required"],0,c)},_submitButtonClick:function(a){a=h(this);a.closest("form, .validationEngineContainer").data("jqv_submitButton",a.attr("id"))}};h.fn.validationEngine=function(a){var b=h(this);if(!b[0])return b;if("string"==typeof a&&"_"!=a.charAt(0)&&e[a])return"showPrompt"!=a&&"hide"!=a&&"hideAll"!=a&&e.init.apply(b),e[a].apply(b,
Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)h.error("Method "+a+" does not exist in jQuery.validationEngine");else return e.init.apply(b,arguments),e.attach.apply(b)};h.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,ignoreFieldsWithClass:"ignoreMe",promptPosition:"bottomLeft",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",
onAjaxFormComplete:h.noop,onBeforeAjaxFormValidation:h.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,notEmpty:!1,showArrow:!0,showArrowOnRadioAndCheckbox:!1,isError:!1,maxErrorsPerField:1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1E4,fadeDuration:300,prettySelect:!1,
addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1}};h(function(){h.validationEngine.defaults.promptPosition=e.isRTL()?"topLeft":"topRight"})})(jQuery);