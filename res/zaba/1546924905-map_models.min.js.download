"undefined"==typeof Banka&&(Banka={});"undefined"==typeof Banka.Map&&(Banka.Map={});Banka.Map.BasicModel=function(a){this.locationsUrl=a;this.selectedLocation=this.location=null;this.data=[];this.init()};
Banka.Map.BasicModel.prototype=mixin(Banka.Mixins.Observable,{init:function(){this.getLocationsData()},clearLocation:function(){this.location=null;this.notifyListeners("onClearLocation",null)},setNewLocation:function(a){this.unselectLocation();this.location=a;this.data=[];this.notifyListeners("onNewLocation",a);this.getLocationsData()},getLocationsData:function(){null!==this.location&&window.setTimeout(function(){var a=this.getDummyData();this.data={};for(var b=0;b<a.length;b++)this.data[a[b].id.toString()]=
a[b],this.data[a[b].id.toString()].type="red";this.notifyListeners("onLocationsLoad",{marker_data:a})}.bind(this),300)},selectLocation:function(a){if(this.selectedLocation!=a){var b=this.selectedLocation;this.selectedLocation=a;this.notifyListeners("onSelect",{old:b,"new":this.selectedLocation})}},unselectLocation:function(){null!==this.selectedLocation&&(this.notifyListeners("onUnselect",this.selectedLocation),this.selectedLocation=null)},getSelectedLocation:function(){return this.selectedLocation},
getDataById:function(a){return a in this.data?this.data[a]:{}},getDummyData:function(){for(var a=Math.floor(50*Math.random()+1),b=[],c=0;c<a;c++)b.push({id:c,lat:this.location.lat+(.5>Math.random()?1:-1)*Math.random()/2,lng:this.location.lng+(.5>Math.random()?1:-1)*Math.random()/2,title:"Lokacija "+c,address:"Adresa "+c,phone:"01/ 111 111",open:"Pon-Pet\x3cbr /\x3e08h - 16h"});return b}});