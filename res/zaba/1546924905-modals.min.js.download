"undefined"==typeof Banka&&(Banka={});Banka.DOMUtils={_scrollBarWidth:null,getScrollBarWidth:function(){if(null!==Banka.DOMUtils._scrollBarWidth)return Banka.DOMUtils._scrollBarWidth;var a=$("\x3cdiv\x3e").css({position:"absolute",bottom:"0",right:"0",visibility:"hidden",width:"100px","overflow-y":"scroll"}).appendTo("body"),b=$("\x3cdiv\x3e").css({width:"100%"}).appendTo(a).outerWidth();a.remove();Banka.DOMUtils._scrollBarWidth=100-b;return Banka.DOMUtils._scrollBarWidth}};
"undefined"==typeof Banka.Modals&&(Banka.Modals={});"undefined"==typeof Banka.Modals.ContentProvider&&(Banka.Modals.ContentProvider={});Banka.Modals.ContentProvider.HtmlElement=function(a,b){if(this instanceof Banka.Modals.ContentProvider.HtmlElement)this.element=a,this.data="undefined"==typeof b?null:b;else return new Banka.Modals.ContentProvider.HtmlElement(a)};
Banka.Modals.ContentProvider.HtmlElement.prototype={getContent:function(){return new Promise(function(a,b){0<this.element.length?a({html:this.element.html(),data:this.data}):b(Error("Element does not exist"))}.bind(this))}};
Banka.Modals.ContentProvider.Ajax=function(a,b){if(this instanceof Banka.Modals.ContentProvider.Ajax)this.requestData=a,"undefined"==typeof a.data&&(this.requestData.data={}),"undefined"==typeof a.method&&(this.requestData.method="GET"),this.responseObjectProperties=b;else return new Banka.Modals.ContentProvider.Ajax(a,b)};
Banka.Modals.ContentProvider.Ajax.prototype={getContent:function(){return new Promise(function(a,b){$.ajax(this.requestData.url,{data:this.requestData.data,success:function(b){"undefined"==typeof this.responseObjectProperties||"undefined"==typeof this.responseObjectProperties.html?a({html:b,data:null}):"undefined"==typeof this.responseObjectProperties.data?a({html:b[this.responseObjectProperties.html],data:null}):a({html:b[this.responseObjectProperties.html],data:b[this.responseObjectProperties.data]})}.bind(this),
error:function(a,e,d){b(Error(d))},dataType:"undefined"==typeof this.responseObjectProperties||"undefined"==typeof this.responseObjectProperties.html?"html":"json",method:this.requestData.method})}.bind(this))}};Banka.Modals.ContentProvider.Direct=function(a,b){if(this instanceof Banka.Modals.ContentProvider.Direct)this.html=a,this.data=b;else return new Banka.Modals.ContentProvider.Direct(a,b)};
Banka.Modals.ContentProvider.Direct.prototype={getContent:function(){return"undefined"!=typeof this.data?Promise.resolve({html:this.html,data:this.data}):Promise.resolve({html:this.html,data:null})}};Banka.Modals.Modal=function(a,b){this.contentProvider=a;this.size="undefined"==typeof b?"big":b;this.scrollPosition=0};
Banka.Modals.Modal.prototype={elements:{modal_wrapper:$(".js-modal-wrapper"),modal_window:$(".js-modal-window"),modal_content:$(".js-modal-content"),close_button:$(".js-close-button"),floating_menu:$(".floating-menu"),html:$("html"),body:$("body"),window:$(window)},saveScrollPosition:function(){this.scrollPosition=$(window).scrollTop()},restoreScrollPosition:function(){"undefined"!=typeof this.scrollPosition&&this.elements.window.scrollTop(this.scrollPosition)},addPadding:function(){this.elements.body.css("paddingRight",
Banka.DOMUtils.getScrollBarWidth());this.elements.floating_menu.css("marginRight",Banka.DOMUtils.getScrollBarWidth())},removePadding:function(){this.elements.body.css("paddingRight",0);this.elements.floating_menu.css("marginRight",0)},showModal:function(){var a=this;this.saveScrollPosition();this.elements.modal_wrapper.addClass("active");this.elements.modal_window.addClass("active");"big"!=this.size?this.elements.modal_window.addClass("modal-"+this.size):this.elements.modal_window.removeClass(["modal-small modal-medium"]);
this.addPadding();this.elements.body.addClass("oh-d");this.elements.modal_wrapper.attr({"aria-hidden":"false",tabindex:"0"});window.setTimeout(function(){a.elements.modal_wrapper.addClass("visible")},5);window.setTimeout(function(){a.elements.html.addClass("os");a.elements.body.addClass("oh-m");a.elements.modal_wrapper.addClass("abs")},350)},hideModal:function(){var a=this;this.elements.modal_wrapper.removeClass("abs");this.elements.html.removeClass("os");this.elements.body.removeClass("oh-m");this.restoreScrollPosition();
this.elements.modal_wrapper.removeClass("visible");this.elements.modal_wrapper.attr({"aria-hidden":"true",tabindex:"-1"});window.setTimeout(function(){a.removePadding();a.elements.body.removeClass("oh-d");a.elements.modal_wrapper.removeClass("active");a.elements.modal_window.removeClass("active")}.bind(this),350)},setFocus:function(){var a=this;window.setTimeout(function(){var b=a.elements.modal_content.find("input:first");b.length?b.focus():a.elements.modal_wrapper.focus()},25)},initModalControls:function(){this.initClose()},
initClose:function(){var a=this;this.elements.close_button.on("click.modal",function(b){b.preventDefault();a.close()});$(document.body).on("keyup.modal",function(b){27==b.keyCode&&(b.preventDefault(),a.close())})},clearContent:function(){this.elements.modal_content.html("")},uninit:function(){this.uninitClose();this.uninitContent()},uninitClose:function(){this.elements.close_button.off("click.modal");$(document.body).off("keyup.modal")},open:function(){this.contentProvider.getContent().then(function(a){this.elements.modal_content.html(a.html);
this.showModal();this.initModalControls();this.initContent(a.data)}.bind(this)).catch(function(a){this.elements.modal_content.html(a);this.showModal();this.initModalControls()}.bind(this))},close:function(){this.uninit();this.hideModal()},swapModal:function(a){this.uninitContent();this.clearContent();a.contentProvider.getContent().then(function(a){this.elements.modal_content.html(a.html);this.initContent(a.data)}.bind(this)).catch(function(a){this.elements.modal_content.html(a)}.bind(a))},initContent:function(a){},
uninitContent:function(){}};Banka.Modals.ModalGUIElements=function(a,b){Banka.Modals.Modal.call(this,a,b)};Banka.Modals.ModalGUIElements.prototype=Object.create(Banka.Modals.Modal.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){initAccordion();initTab()}},uninitContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(){}}});Banka.Modals.ModalChat=function(a){Banka.Modals.Modal.call(this,new Banka.Modals.ContentProvider.Ajax({url:a}),"medium")};
Banka.Modals.ModalChat.prototype=Object.create(Banka.Modals.Modal.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){}},uninitContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(){}}});Banka.Modals.ModalTokenWizard=function(a){Banka.Modals.Modal.call(this,new Banka.Modals.ContentProvider.Ajax({url:windowjs+"/modal/modal-token-login",data:a}),"small")};
Banka.Modals.ModalTokenWizard.prototype=Object.create(Banka.Modals.Modal.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){Banka.Modals.Modal.prototype.initContent.call(this,a);$("#tokensource").val(this.contentProvider.requestData.data)}}});Banka.Modals.ModalProductWizard=function(a,b){Banka.Modals.ModalGUIElements.call(this,new Banka.Modals.ContentProvider.Ajax({url:window.j+"/modal/modal-wizard-product/"+a,data:b}))};
Banka.Modals.ModalProductWizard.prototype=Object.create(Banka.Modals.ModalGUIElements.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){var b=this;Banka.Modals.ModalGUIElements.prototype.initContent.call(this,a);$(".js-wizard-select-modal").attr("data-product","#"+b.contentProvider.requestData.data);$(".js-wizard-select-modal",$(".js-modal-content")).on("click",function(a){b.close();window.setTimeout(function(){$($(this).attr("data-product")+" .js-wizard-select").trigger("click")}.bind(this),
500)})}},uninitContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(){Banka.Modals.ModalGUIElements.prototype.uninitContent.call(this);$(".js-wizard-select-modal",$(".js-modal-content")).off("click")}}});Banka.Modals.ModalProductUpsale=function(a,b){Banka.Modals.ModalGUIElements.call(this,new Banka.Modals.ContentProvider.Ajax({url:window.j+"/modal/modal-wizard-product/"+a,data:b}))};
Banka.Modals.ModalProductUpsale.prototype=Object.create(Banka.Modals.ModalGUIElements.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){var b=this;Banka.Modals.ModalGUIElements.prototype.initContent.call(this,a);$(".js-wizard-select-modal",$(".js-modal-content")).on("click",function(a){b.close();window.setTimeout(function(){$("#"+b.contentProvider.requestData.data).prop("checked",!0)}.bind(this),300)})}},uninitContent:{writeable:!0,enumerable:!1,configurable:!0,
value:function(){Banka.Modals.ModalGUIElements.prototype.uninitContent.call(this);$(".js-wizard-select-modal",$(".js-modal-content")).off("click")}}});Banka.Modals.ModalMapStores=function(a){Banka.Modals.Modal.call(this,new Banka.Modals.ContentProvider.HtmlElement($("#map-scaffolding"),a),!1)};
Banka.Modals.ModalMapStores.prototype=Object.create(Banka.Modals.Modal.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){var b=new Banka.Map.BasicModel("ajax url"),c=new Banka.Map.MapViewGeneric(b,{container:$(".js-modal-wrapper .js-map-container")},null);new Banka.Map.MapObjectBaloonView(b,c);b.setNewLocation(a)}},uninitContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(){}}});
Banka.Modals.ModalMapOffices=function(a,b){setPageName=name;a.form=b;Banka.Modals.Modal.call(this,new Banka.Modals.ContentProvider.HtmlElement($("#map-scaffolding"),a),!1)};
Banka.Modals.ModalMapOffices.prototype=Object.create(Banka.Modals.Modal.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){var b;b=window.j.endsWith("/en")?window.j+"/map/nbLokacija":window.j+"/mapa/nbLokacija";b=new Banka.Map.Model(b,Banka.Map.DataSettings.categories,"Poslovnica");var c=new Banka.Map.MapViewGeneric(b,{container:$(".js-modal-wrapper .js-map-container")},null);new Banka.Map.MapObjectBaloonViewSelect({office_input_field:$("#adresaPosInput"),office_seleced_field:$("#selectPos"),
office_fieldset:$("#fieldPos")},b,c,this);new Banka.Map.LocationSearchComponent({container:$(".js-location-search-container",$(".js-modal-content")),list:$(".js-location-search-suggestion-list",$(".js-modal-content")),input_field:$(".js-location-search-input",$(".js-modal-content")),submit_btn:$(".js-location-submit-button",$(".js-modal-content")),clear_btn:$(".js-location-clear-button",$(".js-modal-content")),data_search:a,page_name:$("input[name\x3dgranaGlavna]").val()},b);b.setNewLocation(a)}},
uninitContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(){}}});Banka.Modals.ModalIntro=function(a,b){Banka.Modals.ModalGUIElements.call(this,new Banka.Modals.ContentProvider.Ajax({url:window.j+"/modal/modal-intro"}),"big")};
Banka.Modals.ModalIntro.prototype=Object.create(Banka.Modals.Modal.prototype,{initContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(a){var b=this;$(".js-close-modal").on("click",function(a){a.preventDefault();b.close()})}},uninitContent:{writeable:!0,enumerable:!1,configurable:!0,value:function(){}}});